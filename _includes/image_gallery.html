{%- assign items = include.items -%}
{%- assign title_key = include.title_key | default: 'title' -%}
{%- assign url_key = include.url_key | default: 'url' -%}
{%- assign image_key = include.image_key | default: 'image' -%}
{%- assign subtitle_key = include.subtitle_key -%}
{%- assign container_class = include.class | default: 'projects-grid' -%}

<div class="{{ container_class }}">
  {%- for item in items -%}
    {%- assign title = item[title_key] | default: item.title -%}
    {%- assign url = item[url_key] | default: item.url -%}
    {%- assign image = item[image_key] | default: item.image -%}
    {%- assign subtitle = nil -%}
    {%- if subtitle_key -%}
      {%- assign subtitle = item[subtitle_key] -%}
    {%- endif -%}

    {%- assign image_str = image | append: '' | strip -%}
    <a class="project-card{% if image_str == '' %} project-card--noimg{% endif %}"
       href="{{ url | relative_url }}"
       {%- if image_str != '' -%}
       style="background-image: url('{{ image | relative_url }}')"
       {%- endif -%}
    >
      <span class="project-card__text">
        <span class="project-card__title">{{ title }}</span>
        {%- if subtitle and subtitle != '' -%}
          <span class="project-card__subtitle">{{ subtitle }}</span>
        {%- endif -%}
      </span>
    </a>
  {%- endfor -%}
</div>
